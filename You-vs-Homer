repeat task.wait() until game:IsLoaded() and game.Players.LocalPlayer

local player = game.Players.LocalPlayer
local supportedGames = {
    ["4785497374"] = true,
    ["3203685552"] = true,
    ["111530421351096"] = true,
}
local currentPlaceId = tostring(game.PlaceId)
local currentGameId = tostring(game.GameId)

if not (supportedGames[currentPlaceId] or supportedGames[currentGameId]) then
    local gui = Instance.new("ScreenGui")
    gui.Name = "UnsupportedGame"
    gui.ResetOnSpawn = false
    gui.Parent = game:GetService("CoreGui")

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 400, 0, 250)
    frame.Position = UDim2.new(0.5, -200, 0.5, -125)
    frame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
    frame.BackgroundTransparency = 0.1
    frame.Active = true
    frame.Parent = gui
    local corner = Instance.new("UICorner"); corner.CornerRadius = UDim.new(0, 12); corner.Parent = frame

    local gradient = Instance.new("UIGradient")
    gradient.Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, Color3.fromRGB(181,1,31)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(100,0,20))
    })
    gradient.Rotation = 90
    gradient.Parent = frame

    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, -40, 0, 50)
    title.Position = UDim2.new(0, 20, 0, 20)
    title.BackgroundTransparency = 1
    title.Text = "UNSUPPORTED GAME"
    title.TextColor3 = Color3.new(1,1,1)
    title.Font = Enum.Font.GothamBold
    title.TextSize = 24
    title.Parent = frame

    local desc = Instance.new("TextLabel")
    desc.Size = UDim2.new(1, -40, 0, 60)
    desc.Position = UDim2.new(0, 20, 0, 80)
    desc.BackgroundTransparency = 1
    desc.Text = "This game is not supported.\nCheck our Discord for supported games."
    desc.TextColor3 = Color3.new(1,1,1)
    desc.Font = Enum.Font.Gotham
    desc.TextSize = 16
    desc.TextWrapped = true
    desc.Parent = frame

    local copyBtn = Instance.new("TextButton")
    copyBtn.Size = UDim2.new(0, 200, 0, 45)
    copyBtn.Position = UDim2.new(0.5, -100, 1, -60)
    copyBtn.BackgroundColor3 = Color3.fromRGB(181,1,31)
    copyBtn.Text = "COPY DISCORD INVITE"
    copyBtn.TextColor3 = Color3.new(1,1,1)
    copyBtn.Font = Enum.Font.GothamBold
    copyBtn.TextSize = 16
    copyBtn.Parent = frame
    local btnCorner = Instance.new("UICorner"); btnCorner.CornerRadius = UDim.new(0, 8); btnCorner.Parent = copyBtn
    copyBtn.MouseButton1Click:Connect(function()
        setclipboard("https://discord.gg/CdDUfPWQR4")
        copyBtn.Text = "COPIED!"
        task.wait(1)
        copyBtn.Text = "COPY DISCORD INVITE"
    end)

    frame.Size = UDim2.new(0, 0, 0, 0)
    frame.Position = UDim2.new(0.5, 0, 0.5, 0)
    frame.BackgroundTransparency = 1
    title.TextTransparency = 1
    desc.TextTransparency = 1
    copyBtn.TextTransparency = 1
    copyBtn.BackgroundTransparency = 1

    local tweenService = game:GetService("TweenService")
    tweenService:Create(frame, TweenInfo.new(0.4, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
        Size = UDim2.new(0, 400, 0, 250),
        Position = UDim2.new(0.5, -200, 0.5, -125),
        BackgroundTransparency = 0.1
    }):Play()
    tweenService:Create(title, TweenInfo.new(0.3), { TextTransparency = 0 }):Play()
    tweenService:Create(desc, TweenInfo.new(0.3), { TextTransparency = 0 }):Play()
    tweenService:Create(copyBtn, TweenInfo.new(0.3), { TextTransparency = 0, BackgroundTransparency = 0 }):Play()

    return
end

pcall(function()
    local ACtable = {
        player.PlayerScripts:FindFirstChild("QuitsAntiCheatChecker"),
        player.PlayerScripts:FindFirstChild("QuitsAntiCheatLocal"),
        game:GetService("StarterPlayer").StarterPlayerScripts:FindFirstChild("QuitsAntiCheatChecker"),
        game:GetService("StarterPlayer").StarterPlayerScripts:FindFirstChild("QuitsAntiCheatLocal"),
    }
    for _, v in ipairs(ACtable) do if v then v:Destroy() end end
end)

for i,v in pairs(getconnections(game:GetService("ScriptContext").Error)) do v:Disconnect() end
coroutine.wrap(function()
    while task.wait(1) do
        for i,v in pairs(getconnections(game:GetService("ScriptContext").Error)) do v:Disconnect() end
    end
end)()

pcall(function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/zinsos/luau/refs/heads/main/YouVsHomerBypass"))()
end)

local WindUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/orialdev/WindUI-Boreal/refs/heads/main/WindUI%20Boreal"))()
setclipboard("https://discord.gg/CdDUfPWQR4")

local Window = WindUI:CreateWindow({
    Title = "Potatoware V3.2.1",
    Author = "Made by Baconhaxxer1",
    Size = UDim2.fromOffset(680, 520),
    Icon = "sparkles",
    ModernLayout = true,
    Watermark = {
        Enabled = true,
        Text = "Potatoware V3.2.1 | Baconhaxxer1",
        Position = "bottom-right",
        Size = 14,
        Padding = 12,
    },
})

local savedValues = {
    walkspeed = 16,
    fullbrightEnabled = false,
    brightness = 2
}

local wallhop = { enabled = false, angle = 90, flick = true, pushForce = 52, jumpPower = 50, interval = 0.25, lastJump = 0 }

local function isTouchingWithLegs(char, root)
    if not char or not root then return false end
    local overlapParams = OverlapParams.new()
    local ignore = {char}
    for _, part in pairs(char:GetDescendants()) do
        if part:IsA("BasePart") then
            local n = part.Name:lower()
            if n:find("head") or n:find("torso") or n:find("arm") or n:find("hand") then
                table.insert(ignore, part)
            end
        end
    end
    overlapParams.FilterDescendantsInstances = ignore
    overlapParams.FilterType = Enum.RaycastFilterType.Exclude
    local hits = workspace:GetPartBoundsInBox(root.CFrame, Vector3.new(3, 4, 3), overlapParams)
    local distinct = 0
    local checked = {}
    for _, p in pairs(hits) do
        if p.CanCollide and not checked[p] then
            checked[p] = true
            distinct = distinct + 1
        end
    end
    return distinct >= 2
end

game:GetService("RunService").Heartbeat:Connect(function()
    if not wallhop.enabled then return end
    local char = player.Character
    if not char then return end
    local hum = char:FindFirstChildOfClass("Humanoid")
    local root = char:FindFirstChild("HumanoidRootPart") or char.PrimaryPart
    if not root or not hum then return end
    hum.UseJumpPower = true
    hum.JumpPower = wallhop.jumpPower
    if hum.Jump == true and tick() - wallhop.lastJump >= wallhop.interval then
        if isTouchingWithLegs(char, root) then
            wallhop.lastJump = tick()
            root.AssemblyLinearVelocity = Vector3.new(root.AssemblyLinearVelocity.X, wallhop.pushForce, root.AssemblyLinearVelocity.Z)
            if wallhop.flick then
                root.CFrame = root.CFrame * CFrame.Angles(0, math.rad(wallhop.angle), 0)
            end
        end
    end
end)

local MainTab = Window:Tab({ Title = "Main", Icon = "home" })

local selectedPlayer = nil

local function updatePlayerList()
    local newList = {}
    for _, p in pairs(game.Players:GetPlayers()) do
        if p ~= player then table.insert(newList, p.Name) end
    end
    return newList
end

MainTab:Dropdown({
    Title = "Select Player",
    Desc = "Choose a player to teleport to",
    Values = updatePlayerList(),
    Flag = "playerDropdown",
    Callback = function(val)
        for _, p in pairs(game.Players:GetPlayers()) do
            if p.Name == val then selectedPlayer = p; break end
        end
    end
})

MainTab:Button({
    Title = "Teleport to Selected Player",
    Desc = "Moves you to that player's location",
    Callback = function()
        if selectedPlayer and selectedPlayer.Character and selectedPlayer.Character:FindFirstChild("HumanoidRootPart") then
            local root = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
            if root then
                root.CFrame = selectedPlayer.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, -3)
            end
        else
            WindUI:Notify({ Title = "Error", Content = "Player not valid", Duration = 2 })
        end
    end
})

MainTab:Space({})
MainTab:Slider({ Title = "Walk Speed", Value = { Min = 16, Max = 250, Default = 16 }, Flag = "walkspeed", Callback = function(v)
    savedValues.walkspeed = v
    local hum = game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    if hum then hum.WalkSpeed = v end
end })
MainTab:Space({})

local lighting = game:GetService("Lighting")
local origBright, origAmb, origOutAmb

local function applyFullbright()
    lighting.Brightness = savedValues.brightness
    lighting.Ambient = Color3.new(1,1,1)
    lighting.OutdoorAmbient = Color3.new(1,1,1)
end

local function enableFullbright()
    origBright = lighting.Brightness
    origAmb = lighting.Ambient
    origOutAmb = lighting.OutdoorAmbient
    applyFullbright()
end

local function disableFullbright()
    lighting.Brightness = origBright or 1
    lighting.Ambient = origAmb or Color3.new(0,0,0)
    lighting.OutdoorAmbient = origOutAmb or Color3.new(0,0,0)
end

MainTab:Toggle({ Title = "Fullbright", Desc = "Makes dark areas visible", Flag = "fullbright", Callback = function(s)
    savedValues.fullbrightEnabled = s
    if s then enableFullbright() else disableFullbright() end
end })

MainTab:Space({})

MainTab:Slider({ Title = "Brightness", Desc = "Adjust fullbright intensity", Value = { Min = 0, Max = 5, Default = 2 }, Flag = "brightness", Callback = function(v)
    savedValues.brightness = v
    if savedValues.fullbrightEnabled then
        applyFullbright()
    end
end })
MainTab:Space({})

local RitualTab = Window:Tab({ Title = "Ritual", Icon = "sparkles" })
RitualTab:Space({})
local spinConnection, spinSpeed = nil, 90
RitualTab:Toggle({ Title = "Ritual Spin", Desc = "Spin continuously", Flag = "ritualspin", Callback = function(s)
    if spinConnection then spinConnection:Disconnect(); spinConnection = nil end
    if s then
        local root = game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        if root then
            spinConnection = game:GetService("RunService").Heartbeat:Connect(function(dt) root.CFrame = root.CFrame * CFrame.Angles(0, math.rad(spinSpeed) * dt, 0) end)
        end
    end
end })
RitualTab:Space({})
RitualTab:Slider({ Title = "Spin Speed", Value = { Min = 30, Max = 1000, Default = 90 }, Flag = "spinspeed", Callback = function(v) spinSpeed = v end })
RitualTab:Space({})

local ritualFlyConnection, ritualFlySpeed, platform = nil, 10, nil
RitualTab:Toggle({ Title = "Ritual Fly", Desc = "Rise on invisible platform", Flag = "ritualfly", Callback = function(s)
    if ritualFlyConnection then ritualFlyConnection:Disconnect(); ritualFlyConnection = nil end
    if platform then platform:Destroy(); platform = nil end
    if s then
        local char = game.Players.LocalPlayer.Character
        if not char then return end
        local root = char:FindFirstChild("HumanoidRootPart")
        if not root then return end
        platform = Instance.new("Part")
        platform.Name = "RitualPlatform"
        platform.Size = Vector3.new(10, 1, 10)
        platform.Position = root.Position - Vector3.new(0, 3, 0)
        platform.Anchored = true
        platform.CanCollide = true
        platform.Transparency = 1
        platform.Material = Enum.Material.SmoothPlastic
        platform.Parent = workspace
        ritualFlyConnection = game:GetService("RunService").Heartbeat:Connect(function(dt)
            if not platform or not platform.Parent then ritualFlyConnection:Disconnect(); ritualFlyConnection = nil; return end
            platform.CFrame = platform.CFrame + Vector3.new(0, ritualFlySpeed * dt, 0)
        end)
    end
end })
RitualTab:Space({})
RitualTab:Slider({ Title = "Fly Speed", Value = { Min = 5, Max = 50, Default = 10 }, Flag = "ritualflyspeed", Callback = function(v) ritualFlySpeed = v end })
RitualTab:Space({})

local ESPTab = Window:Tab({ Title = "ESP", Icon = "eye" })
ESPTab:Space({})

local ESPHolder = Instance.new("Folder")
ESPHolder.Name = "PotatoESP"
ESPHolder.Parent = game:GetService("CoreGui")

local espSettings = {
    enabled = false,
    highlight = true,
    username = true,
    highlightColor = Color3.fromRGB(0, 150, 255),
    highlightTransparency = 0.3
}

local function clearESP()
    for _, child in pairs(ESPHolder:GetChildren()) do child:Destroy() end
end

local function addHighlight(part, color, transparency)
    if not part then return end
    local highlight = Instance.new("Highlight")
    highlight.Adornee = part
    highlight.FillColor = color
    highlight.FillTransparency = transparency
    highlight.OutlineColor = Color3.new(1,1,1)
    highlight.OutlineTransparency = 0
    highlight.Parent = ESPHolder
end

local function removeESPForPlayer(plrName)
    for _, child in pairs(ESPHolder:GetChildren()) do
        if child.Name:find(plrName) then child:Destroy() end
    end
end

local function createESP(plr)
    if plr == player then return end
    local char = plr.Character
    if not char then return end

    removeESPForPlayer(plr.Name)

    if espSettings.highlight then
        for _, part in pairs(char:GetDescendants()) do
            if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                addHighlight(part, espSettings.highlightColor, espSettings.highlightTransparency)
            end
        end
        local root = char:FindFirstChild("HumanoidRootPart")
        if root then addHighlight(root, espSettings.highlightColor, espSettings.highlightTransparency) end
    end

    if espSettings.username then
        local head = char:FindFirstChild("Head") or char:FindFirstChild("Torso") or char:FindFirstChild("HumanoidRootPart")
        if head then
            local nameGui = Instance.new("BillboardGui")
            nameGui.Name = plr.Name .. "_Name"
            nameGui.Adornee = head
            nameGui.Size = UDim2.new(0, 150, 0, 30)
            nameGui.StudsOffset = Vector3.new(0, 4.5, 0)
            nameGui.AlwaysOnTop = true
            nameGui.ResetOnSpawn = false

            local nameLabel = Instance.new("TextLabel", nameGui)
            nameLabel.Size = UDim2.new(1, 0, 1, 0)
            nameLabel.BackgroundTransparency = 1
            nameLabel.Text = plr.Name
            nameLabel.TextColor3 = Color3.new(1, 1, 1)
            nameLabel.TextStrokeColor3 = Color3.new(0, 0, 0)
            nameLabel.TextStrokeTransparency = 0.3
            nameLabel.Font = Enum.Font.GothamBold
            nameLabel.TextSize = 16
            nameLabel.TextScaled = false

            nameGui.Parent = ESPHolder
        end
    end
end

local function setupPlayerESP(p)
    if p == player then return end

    local function onCharacterAdded(char)
        removeESPForPlayer(p.Name)
        task.wait(0.5)
        if espSettings.enabled and char and char.Parent then
            createESP(p)
        end
    end

    local function onCharacterRemoving()
        removeESPForPlayer(p.Name)
    end

    if p.Character then
        local char = p.Character
        local hum = char:FindFirstChildOfClass("Humanoid")
        if hum then
            hum.Died:Connect(onCharacterRemoving)
        end
        char.AncestryChanged:Connect(function(_, parent)
            if not parent then onCharacterRemoving() end
        end)
        if espSettings.enabled then
            task.wait(0.5)
            createESP(p)
        end
    end

    p.CharacterAdded:Connect(onCharacterAdded)
end

for _, p in pairs(game.Players:GetPlayers()) do setupPlayerESP(p) end
game.Players.PlayerAdded:Connect(setupPlayerESP)

ESPTab:Toggle({ Title = "ESP Toggle", Desc = "ESP", Flag = "esptoggle", Callback = function(s)
    espSettings.enabled = s
    if s then
        clearESP()
        for _, p in pairs(game.Players:GetPlayers()) do
            if p ~= player and p.Character then createESP(p) end
        end
    else clearESP() end
end })
ESPTab:Space({})

ESPTab:Colorpicker({ Title = "Highlight Color", Desc = "Change highlight color", Flag = "espColor", Default = Color3.fromRGB(0, 150, 255), Callback = function(c)
    espSettings.highlightColor = c
    if espSettings.enabled then clearESP(); for _, p in pairs(game.Players:GetPlayers()) do if p ~= player and p.Character then createESP(p) end end end
end })
ESPTab:Space({})

ESPTab:Slider({ Title = "Highlight Transparency", Value = { Min = 0, Max = 1, Default = 0.3 }, Flag = "espTransparency", Callback = function(v)
    espSettings.highlightTransparency = v
    if espSettings.enabled then clearESP(); for _, p in pairs(game.Players:GetPlayers()) do if p ~= player and p.Character then createESP(p) end end end
end })
ESPTab:Space({})

local UtilityTab = Window:Tab({ Title = "Utility", Icon = "terminal" })
UtilityTab:Space({})
UtilityTab:Toggle({ Title = "Wallhop Toggle", Desc = "Enable wallhop", Flag = "wallhopToggle", Callback = function(s) wallhop.enabled = s; if s then wallhop.jumpPower = 50 end end })
UtilityTab:Space({})
UtilityTab:Toggle({ Title = "Flick Rotation", Desc = "Rotate when wallhopping", Flag = "wallhopFlick", Default = true, Callback = function(s) wallhop.flick = s end })
UtilityTab:Space({})
UtilityTab:Dropdown({ Title = "Angle", Values = { "90°", "45°" }, Value = "90°", Flag = "wallhopAngle", Callback = function(o) wallhop.angle = o == "90°" and 90 or 45 end })
UtilityTab:Space({})
UtilityTab:Slider({ Title = "Push Force", Value = { Min = 30, Max = 100, Default = 52 }, Flag = "wallhopPush", Callback = function(v) wallhop.pushForce = v end })
UtilityTab:Space({})
UtilityTab:Slider({ Title = "Jump Power", Value = { Min = 30, Max = 100, Default = 50 }, Flag = "wallhopJump", Callback = function(v) wallhop.jumpPower = v end })
UtilityTab:Space({})
UtilityTab:Button({ Title = "Open Console", Desc = "Opens Roblox developer console", Callback = function() pcall(function() game:GetService("StarterGui"):SetCore("DevConsoleVisible", true) end) end })
UtilityTab:Space({})

local SupportTab = Window:Tab({ Title = "Support", Icon = "heart" })
SupportTab:Space({})
SupportTab:Button({ Title = "Discord Invite", Desc = "Click to copy invite link", Callback = function() setclipboard("https://discord.gg/CdDUfPWQR4") end })
SupportTab:Space({})

local function safeLabel(tab, text)
    local success, err = pcall(function() tab:Label({ Title = text }) end)
    if not success then
        success, err = pcall(function() tab:AddLabel({ Title = text }) end)
        if not success then
            tab:Button({ Title = text, Desc = "", Callback = function() end })
        end
    end
end

local KeybindsTab = Window:Tab({ Title = "Keybinds", Icon = "keyboard" })
KeybindsTab:Space({})
safeLabel(KeybindsTab, "PC Keybinds")
KeybindsTab:Space({})
safeLabel(KeybindsTab, "Right Ctrl: Toggle ESP")
safeLabel(KeybindsTab, "Right Shift: Toggle Fullbright")
safeLabel(KeybindsTab, "Right Alt: Toggle Wallhop")
safeLabel(KeybindsTab, "Insert: Toggle Optimize")
KeybindsTab:Space({})
safeLabel(KeybindsTab, "(Hold key to toggle)")
KeybindsTab:Space({})

local UserInputService = game:GetService("UserInputService")
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.RightControl then
        espSettings.enabled = not espSettings.enabled
        if espSettings.enabled then
            clearESP()
            for _, p in pairs(game.Players:GetPlayers()) do
                if p ~= player and p.Character then createESP(p) end
            end
            WindUI:Notify({ Title = "Keybind", Content = "ESP Enabled", Duration = 1 })
        else
            clearESP()
            WindUI:Notify({ Title = "Keybind", Content = "ESP Disabled", Duration = 1 })
        end
    elseif input.KeyCode == Enum.KeyCode.RightShift then
        savedValues.fullbrightEnabled = not savedValues.fullbrightEnabled
        if savedValues.fullbrightEnabled then enableFullbright() else disableFullbright() end
        WindUI:Notify({ Title = "Keybind", Content = "Fullbright Toggled", Duration = 1 })
    elseif input.KeyCode == Enum.KeyCode.RightAlt then
        wallhop.enabled = not wallhop.enabled
        if wallhop.enabled then wallhop.jumpPower = 50 end
        WindUI:Notify({ Title = "Keybind", Content = "Wallhop Toggled", Duration = 1 })
    elseif input.KeyCode == Enum.KeyCode.Insert then
        local function optimizeGame()
            setfpscap(999999999)
            for _,v in next,game:GetService("Workspace"):GetDescendants() do
                if v and v:IsA("Model") then
                    v.LevelOfDetail = "Disabled"
                    v.ModelStreamingMode = "Nonatomic"
                elseif v and (v:IsA("BasePart") and not v:IsA("MeshPart")) then
                    v.CastShadow = false
                    v.Material = "Plastic"
                    v.Reflectance = 0 
                    v.MaterialVariant = ""
                elseif v and (v:IsA("Decal") or v:IsA("Texture")) then 
                    v.Transparency = 1
                elseif v and v:IsA("MeshPart") then 
                    v.CastShadow = false
                    v.DoubleSided = false
                    v.RenderFidelity = "Performance"
                    v.TextureID = 10385902758728957
                elseif v and v:IsA("SpecialMesh") then 
                    v.TextureId = 0
                elseif v and v:IsA("ShirtGraphic") then 
                    v.Graphic = 0
                elseif v and (v:IsA("Shirt") or v:IsA("Pants")) then 
                    v[v.ClassName.."Template"] = 0
                elseif v:IsA("Fire") or v:IsA("SpotLight") or v:IsA("Smoke") or v:IsA("Sparkles") then
                    v.Enabled = false   
                elseif v:IsA("Explosion") then
                    v.BlastPressure = 1
                    v.BlastRadius = 1
                elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
                    v.Enabled = false
                elseif v and v:IsA("Beam") then 
                    v.Enabled = false
                elseif v and v:IsA("SurfaceAppearance") then
                    v:Destroy()
                elseif v and v:IsA("Debris") then 
                    v:Destroy()
                elseif v and v:IsA("Attachment") then 
                    v.Visible = false
                elseif v and v:IsA("MaterialVariant") then 
                    v:Destroy()
                end
            end
            for _,v in next,game:GetService("Lighting"):GetDescendants() do 
                if v and (v:IsA("Sky") or v:IsA("Atmosphere") or v:IsA("BloomEffect") or v:IsA("BlurEffect") or v:IsA("SunRaysEffect") or v:IsA("DepthOfFieldEffect") or v:IsA("Clouds") or v:IsA("PostEffect") or v:IsA("ColorCorrectionEffect")) then 
                    v:Destroy()
                end
            end
            sethiddenproperty(game:GetService("Lighting"),"Technology",2)
            game:GetService("Lighting").GlobalShadows = false
            game:GetService("Lighting").FogEnd = 9e9
            game:GetService("Lighting").Brightness = 0
            sethiddenproperty(game:GetService("Workspace"):FindFirstChildOfClass("Terrain"),"Decoration",false)
            game:GetService("Workspace"):FindFirstChildOfClass("Terrain").WaterReflectance = 0 
            game:GetService("Workspace"):FindFirstChildOfClass("Terrain").WaterTransparency = 0.7
            game:GetService("Workspace"):FindFirstChildOfClass("Terrain").WaterWaveSize = 0
            game:GetService("Workspace"):FindFirstChildOfClass("Terrain").WaterWaveSpeed = 0
            game:GetService("Lighting").ChildAdded:Connect(function(addedshit)
                spawn(function() addedshit:Destroy() end)
            end)
            game:GetService("Workspace").DescendantAdded:Connect(function(addedshit)
                spawn(function()
                    if addedshit:IsA("Model") then
                        addedshit.LevelOfDetail = "Disabled"
                        addedshit.ModelStreamingMode = "Nonatomic"
                    elseif (addedshit:IsA("BasePart") and not addedshit:IsA("MeshPart")) then
                        addedshit.CastShadow = false
                        addedshit.Material = "Plastic"
                        addedshit.Reflectance = 0 
                        addedshit.MaterialVariant = ""
                    elseif (addedshit:IsA("Decal") or addedshit:IsA("Texture")) then 
                        addedshit.Transparency = 1
                    elseif addedshit:IsA("MeshPart") then 
                        addedshit.CastShadow = false
                        addedshit.DoubleSided = false
                        addedshit.RenderFidelity = "Performance"
                        addedshit.TextureID = 10385902758728957
                    elseif addedshit:IsA("SpecialMesh") then 
                        addedshit.TextureId = 0
                    elseif addedshit:IsA("ShirtGraphic") then 
                        addedshit.Graphic = 0
                    elseif (addedshit:IsA("Shirt") or addedshit:IsA("Pants")) then 
                        addedshit[addedshit.ClassName.."Template"] = 0
                    elseif addedshit:IsA("Fire") or addedshit:IsA("SpotLight") or addedshit:IsA("Smoke") or addedshit:IsA("Sparkles") then
                        addedshit.Enabled = false   
                    elseif addedshit:IsA("Explosion") then
                        addedshit.BlastPressure = 1
                        addedshit.BlastRadius = 1
                    elseif addedshit:IsA("ParticleEmitter") or addedshit:IsA("Trail") then
                        addedshit.Enabled = false
                    elseif addedshit:IsA("Beam") then 
                        addedshit.Enabled = false
                    elseif addedshit:IsA("SurfaceAppearance") then
                        addedshit:Destroy()
                    elseif addedshit:IsA("Debris") then 
                        addedshit:Destroy()
                    elseif addedshit:IsA("Attachment") then 
                        addedshit.Visible = false
                    elseif addedshit:IsA("MaterialVariant") then 
                        addedshit:Destroy()
                    end
                end)
            end)
            WindUI:Notify({ Title = "Optimize", Content = "Game optimized", Duration = 2 })
        end
        optimizeGame()
        WindUI:Notify({ Title = "Keybind", Content = "Optimize applied", Duration = 1 })
    end
end)

local ChangelogTab = Window:Tab({ Title = "Changelogs", Icon = "list" })
ChangelogTab:Space({})
safeLabel(ChangelogTab, "Version 3.2.1")
ChangelogTab:Space({})
safeLabel(ChangelogTab, "✓ Added Tp To Player")
safeLabel(ChangelogTab, "✓ Esp Rework")
safeLabel(ChangelogTab, "✓ New Changelogs tab")
safeLabel(ChangelogTab, "✓ Potatoware V3.2.1")
safeLabel(ChangelogTab, "✓ Removed Fly, will be reworked soon")
safeLabel(ChangelogTab, "✓ Removed Jumppower")
safeLabel(ChangelogTab, "✓ New ui!!! (Finally)")
safeLabel(ChangelogTab, "✓ Added Shaders And Low quality mode")
safeLabel(ChangelogTab, "✓ Bear Alpha Support Soon.")
ChangelogTab:Space({})

local SettingsTab = Window:Tab({ Title = "Settings", Icon = "settings" })
SettingsTab:Space({})

SettingsTab:Colorpicker({
    Title = "Theme Color",
    Desc = "Change the main UI color",
    Default = Color3.fromRGB(181,1,31),
    Callback = function(color)
        local mainFrame = Window._frame or Window._mainFrame
        if mainFrame then
            for _, v in pairs(mainFrame:GetDescendants()) do
                if v:IsA("Frame") and v.BackgroundColor3 == Color3.fromRGB(181,1,31) then
                    v.BackgroundColor3 = color
                end
                if v:IsA("TextButton") and v.BackgroundColor3 == Color3.fromRGB(181,1,31) then
                    v.BackgroundColor3 = color
                end
            end
        end
    end
})
SettingsTab:Space({})

SettingsTab:Button({
    Title = "Optimize Game",
    Desc = "Reduce graphics for better performance",
    Callback = function()
        setfpscap(999999999)
        for _,v in next,game:GetService("Workspace"):GetDescendants() do
            if v and v:IsA("Model") then
                v.LevelOfDetail = "Disabled"
                v.ModelStreamingMode = "Nonatomic"
            elseif v and (v:IsA("BasePart") and not v:IsA("MeshPart")) then
                v.CastShadow = false
                v.Material = "Plastic"
                v.Reflectance = 0 
                v.MaterialVariant = ""
            elseif v and (v:IsA("Decal") or v:IsA("Texture")) then 
                v.Transparency = 1
            elseif v and v:IsA("MeshPart") then 
                v.CastShadow = false
                v.DoubleSided = false
                v.RenderFidelity = "Performance"
                v.TextureID = 10385902758728957
            elseif v and v:IsA("SpecialMesh") then 
                v.TextureId = 0
            elseif v and v:IsA("ShirtGraphic") then 
                v.Graphic = 0
            elseif v and (v:IsA("Shirt") or v:IsA("Pants")) then 
                v[v.ClassName.."Template"] = 0
            elseif v:IsA("Fire") or v:IsA("SpotLight") or v:IsA("Smoke") or v:IsA("Sparkles") then
                v.Enabled = false   
            elseif v:IsA("Explosion") then
                v.BlastPressure = 1
                v.BlastRadius = 1
            elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
                v.Enabled = false
            elseif v and v:IsA("Beam") then 
                v.Enabled = false
            elseif v and v:IsA("SurfaceAppearance") then
                v:Destroy()
            elseif v and v:IsA("Debris") then 
                v:Destroy()
            elseif v and v:IsA("Attachment") then 
                v.Visible = false
            elseif v and v:IsA("MaterialVariant") then 
                v:Destroy()
            end
        end
        for _,v in next,game:GetService("Lighting"):GetDescendants() do 
            if v and (v:IsA("Sky") or v:IsA("Atmosphere") or v:IsA("BloomEffect") or v:IsA("BlurEffect") or v:IsA("SunRaysEffect") or v:IsA("DepthOfFieldEffect") or v:IsA("Clouds") or v:IsA("PostEffect") or v:IsA("ColorCorrectionEffect")) then 
                v:Destroy()
            end
        end
        sethiddenproperty(game:GetService("Lighting"),"Technology",2)
        game:GetService("Lighting").GlobalShadows = false
        game:GetService("Lighting").FogEnd = 9e9
        game:GetService("Lighting").Brightness = 0
        sethiddenproperty(game:GetService("Workspace"):FindFirstChildOfClass("Terrain"),"Decoration",false)
        game:GetService("Workspace"):FindFirstChildOfClass("Terrain").WaterReflectance = 0 
        game:GetService("Workspace"):FindFirstChildOfClass("Terrain").WaterTransparency = 0.7
        game:GetService("Workspace"):FindFirstChildOfClass("Terrain").WaterWaveSize = 0
        game:GetService("Workspace"):FindFirstChildOfClass("Terrain").WaterWaveSpeed = 0
        game:GetService("Lighting").ChildAdded:Connect(function(addedshit)
            spawn(function() addedshit:Destroy() end)
        end)
        game:GetService("Workspace").DescendantAdded:Connect(function(addedshit)
            spawn(function()
                if addedshit:IsA("Model") then
                    addedshit.LevelOfDetail = "Disabled"
                    addedshit.ModelStreamingMode = "Nonatomic"
                elseif (addedshit:IsA("BasePart") and not addedshit:IsA("MeshPart")) then
                    addedshit.CastShadow = false
                    addedshit.Material = "Plastic"
                    addedshit.Reflectance = 0 
                    addedshit.MaterialVariant = ""
                elseif (addedshit:IsA("Decal") or addedshit:IsA("Texture")) then 
                    addedshit.Transparency = 1
                elseif addedshit:IsA("MeshPart") then 
                    addedshit.CastShadow = false
                    addedshit.DoubleSided = false
                    addedshit.RenderFidelity = "Performance"
                    addedshit.TextureID = 10385902758728957
                elseif addedshit:IsA("SpecialMesh") then 
                    addedshit.TextureId = 0
                elseif addedshit:IsA("ShirtGraphic") then 
                    addedshit.Graphic = 0
                elseif (addedshit:IsA("Shirt") or addedshit:IsA("Pants")) then 
                    addedshit[addedshit.ClassName.."Template"] = 0
                elseif addedshit:IsA("Fire") or addedshit:IsA("SpotLight") or addedshit:IsA("Smoke") or addedshit:IsA("Sparkles") then
                    addedshit.Enabled = false   
                elseif addedshit:IsA("Explosion") then
                    addedshit.BlastPressure = 1
                    addedshit.BlastRadius = 1
                elseif addedshit:IsA("ParticleEmitter") or addedshit:IsA("Trail") then
                    addedshit.Enabled = false
                elseif addedshit:IsA("Beam") then 
                    addedshit.Enabled = false
                elseif addedshit:IsA("SurfaceAppearance") then
                    addedshit:Destroy()
                elseif addedshit:IsA("Debris") then 
                    addedshit:Destroy()
                elseif addedshit:IsA("Attachment") then 
                    addedshit.Visible = false
                elseif addedshit:IsA("MaterialVariant") then 
                    addedshit:Destroy()
                end
            end)
        end)
        WindUI:Notify({ Title = "Optimize", Content = "Game optimized for performance", Duration = 2 })
    end
})
SettingsTab:Space({})

local shadersEnabled = false
local originalLighting = {}
local function saveOriginalLighting()
    originalLighting.Technology = lighting.Technology
    originalLighting.ShadowSoftness = lighting.ShadowSoftness
    originalLighting.ClockTime = lighting.ClockTime
    originalLighting.GeographicLatitude = lighting.GeographicLatitude
    originalLighting.Brightness = lighting.Brightness
    originalLighting.Ambient = lighting.Ambient
    originalLighting.ColorShift_Top = lighting.ColorShift_Top
    originalLighting.ColorShift_Bottom = lighting.ColorShift_Bottom
    originalLighting.OutdoorAmbient = lighting.OutdoorAmbient
    originalLighting.GlobalShadows = lighting.GlobalShadows
    originalLighting.EnvironmentDiffuseScale = lighting.EnvironmentDiffuseScale
    originalLighting.EnvironmentSpecularScale = lighting.EnvironmentSpecularScale
    originalLighting.ExposureCompensation = lighting.ExposureCompensation
end

local function enableShaders()
    settings().Rendering.QualityLevel = Enum.QualityLevel.Level21
    lighting.Technology = Enum.Technology.ShadowMap
    lighting.ShadowSoftness = 0.15
    lighting.ClockTime = 9
    lighting.GeographicLatitude = 41.73
    lighting.Brightness = 5
    lighting.Ambient = Color3.fromRGB(70, 70, 70)
    lighting.ColorShift_Top = Color3.fromRGB(255, 138, 35)
    lighting.ColorShift_Bottom = Color3.fromRGB(0, 0, 0)
    lighting.OutdoorAmbient = Color3.fromRGB(135, 135, 135)
    lighting.GlobalShadows = true
    lighting.EnvironmentDiffuseScale = 1
    lighting.EnvironmentSpecularScale = 1
    lighting.ExposureCompensation = 0
    workspace.Terrain.WaterReflectance = 0.08
    workspace.Terrain.WaterTransparency = 0.85
    workspace.Terrain.WaterWaveSize = 0.15
    workspace.Terrain.WaterWaveSpeed = 12
    workspace.Terrain.WaterColor = Color3.fromRGB(12, 84, 92)
    local sky = Instance.new("Sky", lighting)
    sky.SkyboxBk = "rbxassetid://271042516"
    sky.SkyboxDn = "rbxassetid://271077243"
    sky.SkyboxFt = "rbxassetid://271042556"
    sky.SkyboxLf = "rbxassetid://271042310"
    sky.SkyboxRt = "rbxassetid://271042467"
    sky.SkyboxUp = "rbxassetid://271077958"
end

local function disableShaders()
    settings().Rendering.QualityLevel = Enum.QualityLevel.Level00
    lighting.Technology = originalLighting.Technology or Enum.Technology.ShadowMap
    lighting.ShadowSoftness = originalLighting.ShadowSoftness or 0.1
    lighting.ClockTime = originalLighting.ClockTime or 12
    lighting.GeographicLatitude = originalLighting.GeographicLatitude or 41.73
    lighting.Brightness = originalLighting.Brightness or 1
    lighting.Ambient = originalLighting.Ambient or Color3.new(0,0,0)
    lighting.ColorShift_Top = originalLighting.ColorShift_Top or Color3.new(1,1,1)
    lighting.ColorShift_Bottom = originalLighting.ColorShift_Bottom or Color3.new(0,0,0)
    lighting.OutdoorAmbient = originalLighting.OutdoorAmbient or Color3.new(0.5,0.5,0.5)
    lighting.GlobalShadows = originalLighting.GlobalShadows or true
    lighting.EnvironmentDiffuseScale = originalLighting.EnvironmentDiffuseScale or 1
    lighting.EnvironmentSpecularScale = originalLighting.EnvironmentSpecularScale or 1
    lighting.ExposureCompensation = originalLighting.ExposureCompensation or 0
    workspace.Terrain.WaterReflectance = 0.05
    workspace.Terrain.WaterTransparency = 0.8
    workspace.Terrain.WaterWaveSize = 0.1
    workspace.Terrain.WaterWaveSpeed = 10
    workspace.Terrain.WaterColor = Color3.fromRGB(14, 119, 148)
    for _, v in pairs(lighting:GetChildren()) do if v:IsA("Sky") then v:Destroy() end end
end

SettingsTab:Toggle({
    Title = "Shaders",
    Desc = "Enable high-quality visuals",
    Flag = "shaders",
    Default = false,
    Callback = function(state)
        if state then
            saveOriginalLighting()
            enableShaders()
        else
            disableShaders()
        end
    end
})
SettingsTab:Space({})

SettingsTab:Button({
    Title = "Destroy Script",
    Desc = "Completely remove the UI and stop all features",
    Callback = function()
        if spinConnection then spinConnection:Disconnect() end
        if ritualFlyConnection then ritualFlyConnection:Disconnect() end
        if platform then platform:Destroy() end
        clearESP()
        pcall(function() game:GetService("CoreGui"):FindFirstChild("PotatowarePremiumControls"):Destroy() end)
        Window:Destroy()
    end
})
SettingsTab:Space({})

game.Players.LocalPlayer.CharacterAdded:Connect(function(char)
    task.wait(1)
    local hum = char:FindFirstChildOfClass("Humanoid")
    if hum then hum.WalkSpeed = savedValues.walkspeed end
    if savedValues.fullbrightEnabled then enableFullbright() end
end)

game.Players.PlayerAdded:Connect(function(p)
    if p ~= player then
        pcall(function() MainTab:UpdateFlag("playerDropdown", { Values = updatePlayerList() }) end)
    end
end)

game.Players.PlayerRemoving:Connect(function(p)
    if p == selectedPlayer then selectedPlayer = nil end
    pcall(function() MainTab:UpdateFlag("playerDropdown", { Values = updatePlayerList() }) end)
end)

WindUI:Notify({ Title = "Potatoware V3.2.1", Content = "Successfully Bypassed AntiCheat!", Duration = 3 })
